<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>History AI EDU - H·ªçc L·ªãch S·ª≠ V·ªõi Tr√≠ Tu·ªá Nh√¢n T·∫°o</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" />
  <link rel="icon" type="image/x-icon" href="assets/img/logo.png" />
  <!-- Global style -->
  <link rel="stylesheet" href="css/style.css" />

  <!-- Firebase & Navigation -->
  <script type="module" src="js/firebase-config.js"></script>
  <script type="module" src="js/nav.js"></script>
</head>

<body>

  <!-- Navbar placeholder -->
  <header id="navbar-root"></header>

  <!-- ============ HERO SECTION ============ -->
  <section class="bg-brand text-white py-5">
    <div class="container">
      <div class="row align-items-center flex-column-reverse flex-md-row">
        <div class="col-md-6 mt-4 mt-md-0 text-center text-md-start">
          <h1 class="fw-bold mb-3" style="line-height:1.3;">
            H·ªçc L·ªãch S·ª≠ Th√¥ng Minh <br />
            v·ªõi Tr√≠ Tu·ªá Nh√¢n T·∫°o
          </h1>
          <p class="mb-4">
            ƒê·∫∑t c√¢u h·ªèi v·ªÅ c√°c s·ª± ki·ªán l·ªãch s·ª≠, t·∫£i s√°ch gi√°o khoa ƒë·ªÉ ƒë∆∞·ª£c gi·∫£i th√≠ch d·ªÖ hi·ªÉu,
            ho·∫∑c ch·ª•p ·∫£nh hi·ªán v·∫≠t ‚Äì AI s·∫Ω gi√∫p b·∫°n hi·ªÉu ngu·ªìn g·ªëc v√† √Ω nghƒ©a.
          </p>

          <div class="d-flex flex-column flex-sm-row gap-2">
            <!-- ƒê√£ ƒë·ªïi sang button c√≥ id ƒë·ªÉ JS x·ª≠ l√Ω -->
            <a id="btn-hero-start" href="#" class="btn btn-light fw-semibold me-sm-2 mb-2 mb-sm-0">
              B·∫Øt ƒë·∫ßu ngay
            </a>
            <a href="#features" class="btn btn-outline-light fw-semibold">
              Kh√°m ph√° t√≠nh nƒÉng
            </a>
          </div>
        </div>

        <div class="col-md-6 text-center">
          <div class="card shadow-soft rounded-lg" style="max-width:320px; margin:0 auto;">
            <div class="card-body">
              <div class="small text-muted mb-2">V√≠ d·ª•:</div>
              <div class="p-3 rounded-lg mb-2" style="background:#f8f9fa;">
                <div class="small text-muted mb-1">B·∫°n h·ªèi üëá</div>
                <div class="fw-semibold">
                  ‚ÄúChi·∫øn th·∫Øng B·∫°ch ƒê·∫±ng nƒÉm 1288 di·ªÖn ra nh∆∞ th·∫ø n√†o?‚Äù
                </div>
              </div>
              <div class="p-3 rounded-lg" style="background:#eef6ff;">
                <div class="small text-muted mb-1">AI tr·∫£ l·ªùi ü§ñ</div>
                <div class="small">
                  Tr·∫≠n B·∫°ch ƒê·∫±ng 1288 l√† chi·∫øn th·∫Øng quy·∫øt ƒë·ªãnh c·ªßa qu√¢n ƒê·∫°i Vi·ªát
                  do Tr·∫ßn H∆∞ng ƒê·∫°o ch·ªâ huy, ƒë√°nh b·∫°i qu√¢n Nguy√™n - M√¥ng b·∫±ng chi·∫øn thu·∫≠t
                  c·∫Øm c·ªçc g·ªó d∆∞·ªõi l√≤ng s√¥ng...
                </div>
              </div>
            </div>
          </div>
          <div class="text-white-50 small mt-3">
            * D·ªØ li·ªáu minh ho·∫°
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============ FEATURE SECTION ============ -->
  <section id="features" class="section">
    <div class="container">
      <h2 class="section-title">
        T√≠nh nƒÉng ch√≠nh
      </h2>

      <div class="row g-4 mt-4">

        <!-- H·ªèi ƒë√°p AI -->
        <div class="col-md-4">
          <div class="card h-100 text-center p-3">
            <div class="card-body d-flex flex-column">
              <div class="mb-3">
                <div class="rounded-circle bg-brand text-white d-inline-flex align-items-center justify-content-center shadow-soft"
                     style="width:56px;height:56px;font-size:1.2rem;font-weight:600;">
                  Q&A
                </div>
              </div>
              <h5 class="fw-bold mb-2">H·ªèi ƒë√°p l·ªãch s·ª≠ v·ªõi AI</h5>
              <p class="text-muted small flex-grow-1">
                ƒê·∫∑t c√¢u h·ªèi v·ªÅ nh√¢n v·∫≠t, s·ª± ki·ªán, m·ªëc th·ªùi gian.
                AI tr·∫£ l·ªùi theo ng√¥n ng·ªØ d·ªÖ hi·ªÉu, ph√π h·ª£p h·ªçc sinh.
              </p>
              <a class="btn btn-brand w-100 fw-semibold mt-3" href="chat-ai.html">
                M·ªü H·ªèi ƒë√°p AI
              </a>
            </div>
          </div>
        </div>

        <!-- Nh·∫≠n di·ªán h√¨nh ·∫£nh -->
        <div class="col-md-4">
          <div class="card h-100 text-center p-3">
            <div class="card-body d-flex flex-column">
              <div class="mb-3">
                <div class="rounded-circle bg-brand text-white d-inline-flex align-items-center justify-content-center shadow-soft"
                     style="width:56px;height:56px;font-size:1.2rem;font-weight:600;">
                  üì∑
                </div>
              </div>
              <h5 class="fw-bold mb-2">Nh·∫≠n di·ªán nh√¢n v·∫≠t / hi·ªán v·∫≠t</h5>
              <p class="text-muted small flex-grow-1">
                Ch·ª•p t∆∞·ª£ng ƒë√†i, tranh ch√¢n dung, huy hi·ªáu, ki·∫øm, √°o gi√°p...
                AI c·ªë g·∫Øng nh·∫≠n d·∫°ng v√† gi·∫£i th√≠ch √Ω nghƒ©a l·ªãch s·ª≠.
              </p>
              <a class="btn btn-brand w-100 fw-semibold mt-3" href="vision-ai.html">
                Th·ª≠ nh·∫≠n di·ªán h√¨nh ·∫£nh
              </a>
            </div>
          </div>
        </div>

        <!-- Tr·ª£ l√Ω h·ªçc t·∫≠p -->
        <div class="col-md-4">
          <div class="card h-100 text-center p-3">
            <div class="card-body d-flex flex-column">
              <div class="mb-3">
                <div class="rounded-circle bg-brand text-white d-inline-flex align-items-center justify-content-center shadow-soft"
                     style="width:56px;height:56px;font-size:1.2rem;font-weight:600;">
                  üìö
                </div>
              </div>
              <h5 class="fw-bold mb-2">Tr·ª£ l√Ω h·ªçc t·∫≠p t·ª´ s√°ch PDF</h5>
              <p class="text-muted small flex-grow-1">
                Upload trang s√°ch / t√†i li·ªáu v√† h·ªèi:
                ‚ÄúGi·∫£i th√≠ch gi√∫p c√¥ ƒëo·∫°n n√†y‚Äù, ‚ÄúT√≥m t·∫Øt ph·∫ßn n√†y cho em‚Äù.
              </p>
              <a class="btn btn-brand w-100 fw-semibold mt-3" href="study-assistant.html">
                H·ªèi d·ª±a tr√™n s√°ch
              </a>
            </div>
          </div>
        </div>

      </div>

    </div>
  </section>

  <!-- ============ CTA SECTION ============ -->
  <section class="section py-5" style="background: var(--bg-light);">
    <div class="container">
      <div class="card shadow-soft rounded-lg overflow-hidden">

        <!-- CTA khi CH∆ØA ƒëƒÉng nh·∫≠p -->
        <div class="row g-0 align-items-center" id="cta-guest">
          <div class="col-md-8 p-4 p-md-5">
            <h3 class="fw-bold mb-3 text-brand">S·∫µn s√†ng h·ªçc theo c√°ch m·ªõi?</h3>
            <p class="text-muted mb-4">
              T·∫°o t√†i kho·∫£n mi·ªÖn ph√≠ ƒë·ªÉ l∆∞u l·ªãch s·ª≠ c√¢u h·ªèi, ti·∫øp t·ª•c h·ªçc ·ªü b·∫•t k·ª≥ ƒë√¢u,
              v√† ƒë·ªìng b·ªô gi·ªØa ƒëi·ªán tho·∫°i / m√°y t√≠nh.
            </p>
            <a href="auth.html" class="btn btn-brand fw-semibold" id="btn-cta-register">
              ƒêƒÉng k√Ω t√†i kho·∫£n mi·ªÖn ph√≠
            </a>
          </div>
          <div class="col-md-4 text-center p-4">
            <div class="small text-muted mb-2">ƒê√£ c√≥ t√†i kho·∫£n?</div>
            <a href="auth.html" class="btn btn-outline-brand fw-semibold w-100" id="btn-cta-login">
              ƒêƒÉng nh·∫≠p
            </a>
          </div>
        </div>

        <!-- CTA khi ƒê√É ƒëƒÉng nh·∫≠p -->
        <div class="row g-0 align-items-stretch d-none" id="cta-logged-in">
          <div class="col-md-8 p-4 p-md-5">
            <h3 class="fw-bold mb-3 text-brand">Ch√†o m·ª´ng b·∫°n quay l·∫°i üëã</h3>
            <p class="text-muted mb-4">
              B·∫°n ƒë√£ ƒëƒÉng nh·∫≠p. H√£y ti·∫øp t·ª•c h·ªçc v·ªõi c√°c c√¥ng c·ª• AI, ho·∫∑c ƒë·ªÉ l·∫°i l·ªùi nh·∫Øn g√≥p √Ω cho c√¥ gi√°o.
            </p>
            <div class="d-flex flex-wrap gap-2">
              <a href="chat-ai.html" class="btn btn-brand fw-semibold">
                M·ªü H·ªèi ƒë√°p AI
              </a>
              <a href="study-assistant.html" class="btn btn-outline-brand fw-semibold">
                Tr·ª£ l√Ω h·ªçc t·ª´ s√°ch PDF
              </a>
              <a href="vision-ai.html" class="btn btn-outline-brand fw-semibold">
                Nh·∫≠n di·ªán h√¨nh ·∫£nh
              </a>
            </div>
          </div>
          <div class="col-md-4 p-4 border-start">
            <label for="feedbackMessage" class="small text-muted mb-1">
              ƒê·ªÉ l·∫°i l·ªùi nh·∫Øn nhanh
            </label>
            <textarea id="feedbackMessage" class="form-control mb-2" rows="3"
              placeholder="V√≠ d·ª•: Em mu·ªën th√™m b√†i v·ªÅ kh·ªüi nghƒ©a Lam S∆°n..."></textarea>
            <button class="btn btn-brand w-100 fw-semibold" id="btn-send-feedback">
              G·ª≠i l·ªùi nh·∫Øn
            </button>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Footer placeholder -->
  <footer id="footer-root"></footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Inject navbar + footer + x·ª≠ l√Ω auth cho CTA & Hero -->
  <script type="module">
    import { initNavbarAfterInject } from "./js/nav.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";

    const auth = getAuth();
    let currentUser = null;

    // inject navbar
    fetch('components/navbar.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('navbar-root').innerHTML = html;
        initNavbarAfterInject(); // ch·∫°y auth UI, active link
      });

    // inject footer
    fetch('components/footer.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('footer-root').innerHTML = html;
      });

    // H√†m ƒë·ªïi CTA theo tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
    function updateCtaByAuth(user) {
      const guestCta = document.getElementById('cta-guest');
      const loggedCta = document.getElementById('cta-logged-in');

      if (!guestCta || !loggedCta) return;

      if (user) {
        guestCta.classList.add('d-none');
        loggedCta.classList.remove('d-none');
      } else {
        guestCta.classList.remove('d-none');
        loggedCta.classList.add('d-none');
      }
    }

    // L·∫Øng nghe tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
    onAuthStateChanged(auth, (user) => {
      currentUser = user || null;
      updateCtaByAuth(user);
    });

    // Click "B·∫Øt ƒë·∫ßu ngay"
    const heroStartBtn = document.getElementById('btn-hero-start');
    if (heroStartBtn) {
      heroStartBtn.addEventListener('click', (e) => {
        e.preventDefault();
        if (currentUser) {
          // ƒê√£ ƒëƒÉng nh·∫≠p ‚Üí v√†o lu√¥n chat
          window.location.href = "chat-ai.html";
        } else {
          // Ch∆∞a ƒëƒÉng nh·∫≠p ‚Üí sang trang auth
          window.location.href = "auth.html";
        }
      });
    }

    // X·ª≠ l√Ω n√∫t g·ª≠i l·ªùi nh·∫Øn (t·∫°m th·ªùi: ch·ªâ hi·ªÉn th·ªã tr·∫°ng th√°i)
    const feedbackBtn = document.getElementById('btn-send-feedback');
    const feedbackInput = document.getElementById('feedbackMessage');
    const feedbackStatus = document.getElementById('feedbackStatus');

    if (feedbackBtn && feedbackInput && feedbackStatus) {
      feedbackBtn.addEventListener('click', () => {
        const msg = feedbackInput.value.trim();
        if (!msg) {
          feedbackStatus.textContent = "Vui l√≤ng nh·∫≠p n·ªôi dung l·ªùi nh·∫Øn tr∆∞·ªõc khi g·ª≠i.";
          return;
        }

        console.log("Feedback:", msg);
        feedbackInput.value = "";
        feedbackStatus.textContent = "C·∫£m ∆°n con ƒë√£ ƒë·ªÉ l·∫°i l·ªùi nh·∫Øn! C√¥ s·∫Ω xem v√† c·∫≠p nh·∫≠t b√†i h·ªçc ph√π h·ª£p nh√©.";
      });
    }
  </script>
</body>
</html>
